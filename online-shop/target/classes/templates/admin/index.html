<!DOCTYPE html>
<html lang="en" dir="rtl" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  <title> داشبورد </title>

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" th:href="@{/assets/plugins/font-awesome/css/font-awesome.min.css}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" th:href="@{/assets/dist/css/adminlte.min.css}">
  <!-- Google Font: Source Sans Pro -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

  <!-- bootstrap rtl -->
  <link rel="stylesheet" th:href="@{/assets/dist/css/bootstrap-rtl.min.css}">
  <!-- template rtl version -->
  <link rel="stylesheet" th:href="@{/assets/dist/css/custom-style.css}">

</head>

<body class="hold-transition sidebar-mini">
  <div class="wrapper">

    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">

      <!-- Sidebar -->
      <div class="sidebar">
        <div>
          <!-- Sidebar user panel (optional) -->
          <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="image">
              <img th:src="@{/assets/images/admin.png}" class="img-circle elevation-2" alt="Admin Image">
            </div>
            <div class="info d-block text-light">
              ادمین
            </div>
          </div>

          <!-- Sidebar Menu -->
          <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
              <!-- Add icons to the links using the .nav-icon class
                 with font-awesome or any other icon font library -->

              <li class="nav-item">
                <a th:href="@{/admin}" class="nav-link active">
                  <i class="nav-icon fa fa-dashboard"></i>
                  <p>
                    داشبورد
                  </p>
                </a>
              </li>

              <li class="nav-item">
                <a th:href="@{/admin/products}" class="nav-link">
                  <i class="nav-icon fa fa-cubes"></i>
                  <p>
                    محصولات
                  </p>
                </a>
              </li>

              <li class="nav-item has-treeview ">
                <a href="#" class="nav-link">
                  <i class="nav-icon fa fa-child"></i>
                  <p>
                    مدیریت فروشندگان
                    <i class="right fa fa-angle-left"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a th:href="@{/admin/sellers}" class="nav-link">
                      <i class="fa fa-circle-o nav-icon"></i>
                      <p> لیست فروشندگان</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a th:href="@{/admin/add-seller}" class="nav-link">
                      <i class="fa fa-circle-o nav-icon"></i>
                      <p> افزودن فروشنده</p>
                    </a>
                  </li>
                </ul>
              </li>

              <li class="nav-item">
                <a tH:href="@{/admin/users}" class="nav-link">
                  <i class="nav-icon fa fa-users"></i>
                  <p>
                    کاربران
                    <i class="right fa"></i>
                  </p>
                </a>
              </li>

              <li class="nav-item has-treeview">
                <a href="#" class="nav-link">
                  <i class="nav-icon fa fa-list-alt"></i>
                  <p>
                    مدیریت دسته بندی ها
                    <i class="right fa fa-angle-left"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a th:href="@{/admin/categories}" class="nav-link">
                      <i class="fa fa-circle-o nav-icon"></i>
                      <p> لیست دسته بندی ها</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a th:href="@{/admin/add-category}" class="nav-link">
                      <i class="fa fa-circle-o nav-icon"></i>
                      <p> افزودن دسته بندی</p>
                    </a>
                  </li>
                </ul>
              </li>
            </ul>

            <div class="fixed-bottom mx-auto">
              <a th:href="@{/logout}"><button class="btn btn-warning btn-md"> <i class="fa fa-sign-out"
                    aria-hidden="true"></i> خروج</button></a>
            </div>
          </nav>
          <!-- /.sidebar-menu -->
        </div>
      </div>
      <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">

      <!-- Main content -->
      <section class="content">
        <div class="container-fluid">
          <!-- Info boxes -->
          <div class="row">
            <div class="col-12 col-sm-6 col-md-3">
              <div class="info-box">
                <span class="info-box-icon bg-info elevation-1"><i class="fa fa-rectangle-list"></i></span>

                <div class="info-box-content">
                  <span class="info-box-text">محصولات فروخته شده</span>
                  <span class="info-box-number" th:text="${countOfOrders}"></span>
                </div>
                <!-- /.info-box-content -->
              </div>
              <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <div class="col-12 col-sm-6 col-md-3">
              <div class="info-box mb-3">
                <span class="info-box-icon bg-danger elevation-1"><i class="fa fa-money-bill-wave"></i></span>

                <div class="info-box-content">
                  <span class="info-box-text">مجموع فروش</span>
                  <span class="info-box-number" th:text="${sumOfPayments}"></span>
                </div>
                <!-- /.info-box-content -->
              </div>
              <!-- /.info-box -->
            </div>
            <!-- /.col -->

            <!-- fix for small devices only -->
            <div class="clearfix hidden-md-up"></div>

            <div class="col-12 col-sm-6 col-md-3">
              <div class="info-box mb-3">
                <span class="info-box-icon bg-success elevation-1"><i class="fa fa-box-open"></i></span>

                <div class="info-box-content">
                  <span class="info-box-text">محصولات</span>
                  <span class="info-box-number" th:text="*{productsCount}"></span>
                </div>
                <!-- /.info-box-content -->
              </div>
              <!-- /.info-box -->
            </div>
            <!-- /.col -->
            <div class="col-12 col-sm-6 col-md-3">
              <div class="info-box mb-3">
                <span class="info-box-icon bg-warning elevation-1"><i class="fa fa-users"></i></span>

                <div class="info-box-content">
                  <span class="info-box-text">کاربران </span>
                  <span class="info-box-number" th:text="*{usersCount}"></span>
                </div>
                <!-- /.info-box-content -->
              </div>
              <!-- /.info-box -->
            </div>
            <!-- /.col -->
          </div>
          <!-- /.row -->


          <!-- /.row -->

          <!-- Main row -->
          <div class="row">
            <!-- Left col -->
            <div class="col-md-8">
              <!-- /.card -->
              <div class="row">
              </div>
              <!-- /.row -->

              <!-- TABLE: LATEST ORDERS -->
              <div class="card">
                <div class="card-header border-transparent">
                  <h3 class="card-title">پیام های کاربران </h3>
                </div>
                <!-- /.card-header -->
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table m-0">
                      <thead>
                        <tr>
                          <th>ردیف</th>
                          <th>نام فرستنده</th>
                          <th>ایمیل فرستنده</th>
                          <th>شماره تلفن</th>
                          <th>پیام</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr th:each="message, index : ${messages}">
                          <td th:text="${index.index + 1}"></td>
                          <td th:text="${message.name }"></td>
                          <td th:text="${message.email }"></td>
                          <td th:text="${message.phone }"></td>
                          <td th:text="${message.message }"></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <!-- /.table-responsive -->
                </div>
                <!-- /.card-body -->
                <!-- /.card-footer -->
              </div>

              <!--payments list-->
              <div class="card pt-2">
                <div class="card-header border-transparent">
                  <h3 class="card-title">آخرین پرداخت ها  </h3>
                </div>
                <!-- /.card-header -->
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table m-0">
                      <thead>
                      <tr>
                        <th>ردیف</th>
                        <th>نام کاربر</th>
                        <th>ایمیل کاربر</th>
                        <th> مبلغ</th>
                        <th>تاریخ</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr th:each="payment, index : ${payments}">
                        <td th:text="${index.index + 1}"></td>
                        <td th:text="${payment.user.name }"></td>
                        <td th:text="${payment.user.email }"></td>
                        <td th:text="${payment.amount }"></td>
                        <td th:text="${payment.paidAt}"></td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                  <!-- /.table-responsive -->
                </div>
                <!-- /.card-body -->
                <!-- /.card-footer -->
              </div>
              <!--end payment list-->

              <!--start inventory list-->
              <div class="card">
                <div class="card-header border-transparent">
                  <h3 class="card-title">موجودی انبار </h3>
                </div>
                <!-- /.card-header -->
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table m-0">
                      <thead>
                      <tr>
                        <th>ردیف</th>
                        <th>محصول</th>
                        <th>فروشنده</th>
                        <th>باقی مانده</th>
                        <th>فروخته شده</th>
                        <th>وضعیت</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr th:each="product, index : ${products}">
                        <td th:text="${index.index + 1}"></td>
                        <td th:text="${product.name}"></td>
                        <td th:text="${product.seller.name}"></td>
                        <td th:text="${product.inventory}"></td>
                        <td th:text="${product.stock}-${product.inventory}"></td>
                        <td>
                          <span th:if="${product.inventory != 0}" class="badge badge-success">موجود</span>
                          <span th:if="${product.inventory == 0}" class="badge badge-danger">تمام شده</span>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
              <!--end inventory list-->


            </div>
            <!-- /.col -->

            <div class="col-md-4">

              <!-- PRODUCT LIST -->
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">محصولات تازه اضافه شده</h3>
                </div>
                <!-- /.card-header -->
                <div class="card-body p-0">
                  <ul class="products-list product-list-in-card pl-2 pr-2">
                    <li class="item" th:each="product : ${products}">
                      <div class="product-img">
                        <img th:src="@{${product.imagePath}}" alt="Product Image" class="img-size-50">
                      </div>
                      <div class="product-info">
                        <a href="javascript:void(0)" class="product-title" th:text="${product.name}">
                          <span class="badge badge-warning float-left" th:text="${product.price}"></span></a>
                        <span class="product-description" th:text="${product.category.name}">
                        </span>
                      </div>
                    </li>
                  </ul>
                </div>
                <!-- /.card-body -->
                <!-- /.card-footer -->
              </div>
              <!-- /.card -->



            </div>
            <!-- /.col -->
          </div>
          <!-- /.row -->
        </div><!--/. container-fluid -->
      </section>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
      <!-- Control sidebar content goes here -->
    </aside>
    <!-- /.control-sidebar -->

    <!-- Main Footer -->

  </div>
  <!-- ./wrapper -->

  <!-- REQUIRED SCRIPTS -->
  <!-- jQuery -->
  <script th:src="@{/assets/plugins/jquery/jquery.min.js}"></script>
  <!-- Bootstrap -->
  <script th:src="@{/assets/plugins/bootstrap/js/bootstrap.bundle.min.js}"></script>
  <!-- AdminLTE App -->
  <script th:src="@{/assets/dist/js/adminlte.js}"></script>

  <!-- OPTIONAL SCRIPTS -->
  <script th:src="@{/assets/dist/js/demo.js}"></script>

  <!-- PAGE PLUGINS -->
  <!-- SparkLine -->
  <script th:src="@{/assets/plugins/sparkline/jquery.sparkline.min.js}"></script>
  <!-- jVectorMap -->
  <script th:src="@{/assets/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js}"></script>
  <script th:src="@{/assets/plugins/jvectormap/jquery-jvectormap-world-mill-en.js}"></script>
  <!-- SlimScroll 1.3.0 -->
  <script th:src="@{/assets/plugins/slimScroll/jquery.slimscroll.min.js}"></script>
  <!-- ChartJS 1.0.2 -->
  <script th:src="@{/assets/plugins/chartjs-old/Chart.min.js}"></script>

  <!-- PAGE SCRIPTS -->
  <script th:src="@{/assets/dist/js/pages/dashboard2.js}"></script>
</body>

</html>